let types = ./dhall-kubernetes/types.dhall

let defaults = ./dhall-kubernetes/defaults.dhall

in    λ(args : { name : Text, tag : Text, port : Natural })
	→   defaults.Deployment
	  ⫽ { metadata =
			defaults.ObjectMeta ⫽ { name = args.name }
		, spec =
			Some
			(   defaults.DeploymentSpec
			  ⫽ { replicas =
					Some 2
				, template =
					  defaults.PodTemplateSpec
					⫽ { metadata =
						  defaults.ObjectMeta ⫽ { name = args.name }
					  , spec =
						  Some
						  (   defaults.PodSpec
							⫽ { containers =
								  [   defaults.Container
									⫽ { name =
										  args.name
									  , image =
										  Some args.tag
									  , ports =
										  [   defaults.ContainerPort
											⫽ { containerPort = args.port }
										  ]
									  }
								  ]
							  }
						  )
					  }
				}
			)
		}
